<ng-container *ngIf="formGroup" [formGroup]="formService.workExperienceForm">
    <app-material-card title="Work Experience Deatils">
        <ng-container body *ngIf="formService.workExperienceFormArray.controls.length >0"
            formArrayName="workExperience">
            <div *ngFor="let workExperience of formService.workExperienceFormArray.controls;let i=index">
                <div [formGroupName]="i">
                    <button mat-mini-fab color="warn" *ngIf="formService.workExperienceFormArray.controls.length>1"
                        (click)="removeItem(i)">
                        <mat-icon>delete</mat-icon>
                    </button>
                    <div class="row">
                        <div class="col-md-6 col-sm-12">
                            <mat-form-field appearance="outline">
                                <mat-label>Company Name</mat-label>
                                <input matInput placeholder="Enter Company Name" formControlName="companyName">

                                <mat-hint [ngStyle]="{color: formService.warnColor}"
                                    *ngIf="formService.workExperienceFormArray.at(i).get('companyName')?.hasError && (formService.workExperienceFormArray.at(i).get('companyName')?.dirty || formService.workExperienceFormArray.at(i).get('companyName')?.touched)">
                                    <ng-container
                                        *ngIf="formService.workExperienceFormArray.at(i).get('companyName')?.hasError('required')">This
                                        field is
                                        required</ng-container>
                                </mat-hint>
                            </mat-form-field>
                        </div>
                        <div class="col-md-6 col-sm-12">
                            <mat-form-field appearance="outline">
                                <mat-label>Role</mat-label>
                                <input matInput placeholder="Enter Role" formControlName="role">

                                <mat-hint [ngStyle]="{color: formService.warnColor}"
                                    *ngIf="formService.workExperienceFormArray.at(i).get('role')?.hasError && (formService.workExperienceFormArray.at(i).get('role')?.dirty || formService.workExperienceFormArray.at(i).get('role')?.touched)">
                                    <ng-container
                                        *ngIf="formService.workExperienceFormArray.at(i).get('role')?.hasError('required')">This
                                        field is
                                        required</ng-container>
                                </mat-hint>
                            </mat-form-field>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6 col-sm-12">
                            <mat-form-field appearance="outline">
                                <mat-label>Start Date</mat-label>
                                <input matInput [matDatepicker]="startPicker" formControlName="startDate">
                                <mat-datepicker-toggle matIconSuffix [for]="startPicker"></mat-datepicker-toggle>
                                <mat-datepicker #startPicker color="primary"></mat-datepicker>
                                <mat-hint [ngStyle]="{color: formService.warnColor}"
                                    *ngIf="formService.workExperienceFormArray.at(i).get('startDate')?.hasError && (formService.workExperienceFormArray.at(i).get('startDate')?.dirty || formService.workExperienceFormArray.at(i).get('startDate')?.touched)">
                                    <ng-container
                                        *ngIf="formService.workExperienceFormArray.at(i).get('startDate')?.hasError('required')">This
                                        field is
                                        required</ng-container>
                                </mat-hint>
                            </mat-form-field>
                        </div>
                        <div class="col-md-6 col-sm-12">
                            <mat-form-field appearance="outline">
                                <mat-label>End Date</mat-label>
                                <input matInput [matDatepicker]="endPicker" formControlName="endDate">
                                <mat-datepicker-toggle matIconSuffix [for]="endPicker"></mat-datepicker-toggle>
                                <mat-datepicker #endPicker color="primary"></mat-datepicker>
                                <mat-hint [ngStyle]="{color: formService.warnColor}"
                                    *ngIf="formService.workExperienceFormArray.at(i).get('endDate')?.hasError && (formService.workExperienceFormArray.at(i).get('endDate')?.dirty || formService.workExperienceFormArray.at(i).get('endDate')?.touched)">
                                    <ng-container
                                        *ngIf="formService.workExperienceFormArray.at(i).get('endDate')?.hasError('required')">This
                                        field is
                                        required</ng-container>
                                    <ng-container
                                        *ngIf="formService.workExperienceFormArray.at(i).get('endDate')?.hasError('dateRange')">End
                                        Date should be
                                        gretter than start date</ng-container>
                                </mat-hint>
                            </mat-form-field>
                        </div>
                    </div>
                </div>

                <mat-divider
                    *ngIf="formService.workExperienceFormArray.controls.length>1 || formService.workExperienceFormArray.controls.length-1 !==i"></mat-divider>

                <mat-divider *ngIf="formService.educationFormArray.controls.length>1"></mat-divider>
            </div>
            <button mat-mini-fab color="primary" (click)="addItem()"
                [disabled]="formService.workExperienceFormArray.controls[formService.workExperienceFormArray.controls.length-1].invalid">
                <mat-icon>add_circle</mat-icon>
            </button>
        </ng-container>
    </app-material-card>
</ng-container>